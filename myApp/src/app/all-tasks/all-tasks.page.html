<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>All Tasks</ion-title>
    <ion-buttons slot="end">
      <ion-button  color="dark" round end-item slot="icon">
        <ion-badge color="danger" class="notifications" slot="start">11</ion-badge>
        <ion-icon name="notifications-outline"></ion-icon>
      </ion-button>
      <ion-button color="secondary" solid round end-item icon-end class="toolbar-round">Add Task
        <ion-icon slot="start" name="add-circle"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content padding>
  <ion-grid fixed>
    <ion-row>
      <ion-col size-lg="7" size-xs="12" size-sm="12">
        <!--<tasks [data]="tasks" [attribute]="'assignee'" [value]="'ahmad'" [cond]="'contains'" [title]="'Assigned to Ahmad'"></tasks>-->
        <ion-row>
          <ion-col size="7">
            <ion-searchbar [(ngModel)]="filter.textSearch" [showCancelButton]="true" (ionInput)="search($event)" (ionCancel)="search($event)">
            </ion-searchbar>
          </ion-col>
          <ion-col size="4" class="filter">
            <ion-select interface="popover" class="pull-right" [(ngModel)]="filter.sortingProp" (ionChange)="sortArray(filter.sortingDirection)">
              <ion-select-option selected disabled>Sort By</ion-select-option>
              <ion-select-option [value]="{name:'due',type:'datetime'}">Due Date</ion-select-option>
              <ion-select-option [value]="{name:'created',type:'datetime'}">Created Date</ion-select-option>
              <ion-select-option [value]="{name:'priority',type:'number'}">Priority</ion-select-option>
              <ion-select-option [value]="{name:'assignee',type:'string'}">Assignee</ion-select-option>
            </ion-select>
          </ion-col>
          <ion-col size="1">
            <ion-buttons>
              <ion-button color="dark" clear round end right icon-only (click)="setSortingDirection()">
                <ion-icon [name]="filter.sortingDirection == 1 ? 'md-arrow-down' : 'md-arrow-up'"></ion-icon>

              </ion-button>
            </ion-buttons>
          </ion-col>
        </ion-row>


        <ion-list>
          <ion-item *ngFor="let task of tsks">
            <ion-avatar slot="start">
              <img [src]="task.pic">
            </ion-avatar>
            <ion-label text-wrap>
              <ion-text>
                <h3>
                  {{task.name}}
                  <ion-badge [color]="getPriority(task.priority)" slot="end" [innerHTML]="getStatus(task.priority)"></ion-badge>
                </h3>
              </ion-text>
              <div class="more-details">
                <p>{{task.description}}</p>
              </div>
              <ion-row class="actions-toolbar">
                <ion-col center text-center class="extra-pad">
                  <ion-note>
                    Created at {{task.due | date}}
                  </ion-note>
                </ion-col>
                <ion-col center text-center class="extra-pad">
                  <ion-note>
                    Due by {{task.due | date}}
                  </ion-note>
                </ion-col>
              </ion-row>
            </ion-label>

            <ion-buttons slot="end" class="hide-md hide-sm">
              <ion-button clear color="dark" slot="icon-only" (click)="presentPopover($event)">
                <ion-icon name="md-more"></ion-icon>
              </ion-button>
            </ion-buttons>

          </ion-item>
        </ion-list>
        <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
          <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
          </ion-infinite-scroll-content>
        </ion-infinite-scroll>
      </ion-col>

      <ion-col size-lg="5" size-xs="12" size-sm="12">
        <ion-card>
          <ion-card-header>
            Suspended
          </ion-card-header>
          <tasks [data]="tasksOrigin" [attribute]="'suspended'" [value]="true" [cond]="'bool'" [title]="'Suspended'"></tasks>

        </ion-card>
        <ion-card>
          <ion-card-header>
            Urgent
          </ion-card-header>
          <tasks [data]="tasksOrigin" [attribute]="'priority'" [value]="'80'" [cond]="'gt'" [title]="'Urgent'"></tasks>

        </ion-card>
      </ion-col>
    </ion-row>
    <!--<ion-row>
      <ion-col *ngFor="let task of filtered" col-6 col-md-4 col-lg-4>
        <ion-card [ngClass]="{'danger':task.priority > 50}">
          <ion-item>
            <ion-avatar item-start>
              <img src="http://flatable.phoenixcoded.net/default/assets/images/user.png">
            </ion-avatar>
            <h2>To: {{task.assignee}}</h2>
            <p>{{task.created | date}}</p>
          </ion-item>



          <ion-card-content>
            <p>{{task.name}}</p>
          </ion-card-content>

          <ion-row hidden>
            <ion-col>
              <button ion-button icon-start clear small>
                <div>Details</div>
              </button>
            </ion-col>
            <ion-col>
              <button ion-button icon-start clear small>
                <div>Other Acion</div>
              </button>
            </ion-col>
            <ion-col center text-center>
              <ion-note>

              </ion-note>
            </ion-col>
          </ion-row>
        </ion-card>
      </ion-col>
    </ion-row> -->
  </ion-grid>
</ion-content>
